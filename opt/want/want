#!/bin/sh

cd /opt/want
case "$1" in
  '-f'|'files') echo ""; echo $(echo "  Applications installed on the system:"; ls /opt/want/programs/ | wc -l); echo ""; ls /opt/want/programs; echo "" ;;
  '-i'|'install')
	while [ -n "$1" ]
	do
	case $2 in
	*) for var in $2;
	do cd /opt/want/install && wget https://raw.githubusercontent.com/ivan-hc/want/main/opt/want/programs/$2 && chmod a+x /opt/want/programs/$2 && exec /opt/want/programs/$2; done
	esac
	shift
	done;;
  '-r'|'remove')
	while [ -n "$1" ]
	do
	case $2 in
	*) for var in $2;
	do read -p "Do you wish to REMOVE this program (y,N)?" yn
		case $yn in
		[Yy]* ) exec /opt/want/remove/$2; echo ""; echo "Application removed!"; echo ""; break;;
		[Nn]*|* ) echo "Aborted"; exit;; esac done;;
	esac
	shift
	done;;
  '-s'|'sync') echo ""; echo " Updating WANT, please wait..."; sleep 1;
  	cd /opt/want; mkdir tmp; cd ./tmp; wget -q https://raw.githubusercontent.com/ivan-hc/want/main/opt/want/want && chmod a+x ./want; cd ..;
  	mv /opt/want/tmp/want /opt/want; rmdir /opt/want/tmp; echo "...done!";;
  *) exec /opt/want/want ;;
esac
